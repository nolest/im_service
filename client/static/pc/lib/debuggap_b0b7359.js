!function(){function e(e){this.url="http://"+e.host+":"+(parseInt(e.port)+1)+"/scriptSocket",this.readyState=0,this.getSocketData();var t=this;window.onbeforeunload=function(){try{t.closeSocket()}catch(e){}}}function t(e){function t(e,t){var o=null;if(e.matches(t.selectorText)){for(var o=t.selectorText.split(","),n=t.selectorText,a=0;a<o.length;a++)if(e.matches(o[a])){n=o[a];break}o={css:t.cssText,selectors:t.selectorText,selector:n}}return o}return{_class:function(e){var o=document.styleSheets,n=[];e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;for(var a,r,i=0,s=o.length;s>i;i++)if(a=o[i].cssRules||o[i].rules,(r=o[i].media&&o[i].media.mediaText)&&"all"!=r||(r=""),a&&(!r||window.matchMedia(r).matches))for(var d,l=o[i].href||location.pathname+location.search,c={},p=0,g=a.length;g>p;p++)try{if(d=a[p],1==d.type)(c=t(e,d))&&(c.href=l,c.sheetIndex=i,c.cssRuleIndex=[p],r&&(c.mediaText='media="'+r+'"'),n.push(c));else if(4==d.type){var u=d.media&&d.media.mediaText||"";if(u&&window.matchMedia(u).matches){var h=d.cssRules||d.rules;if(h)for(var f=0,b=h.length;b>f;f++)(c=t(e,h[f]))&&(c.href=l,c.sheetIndex=i,c.cssRuleIndex=[p,f],c.mediaText="@media "+u,n.push(c))}}}catch(m){}return n}(e),_style:function(e){return(e=e.getAttribute("style"))?e:""}(e)}}function o(e,t){t?r.socketBuffer.unshift(e):r.socketBuffer.push(e),s.socketReady()&&r.socketSendStop&&(r.socketSendStop=0,r._sendMessage())}debuggap={version:"3.0.0"};var n=function(e,t){return t=t?t:document,t.querySelector(e)},a=function(e,t){return t=t?t:document,t.querySelectorAll(e)},r=debuggap;r.css3Prefix="-webkit-",r.selfClosing={img:1,hr:1,br:1,area:1,base:1,basefont:1,input:1,link:1,meta:1,command:1,embed:1,keygen:1,wbr:1,param:1,source:1,track:1,col:1},r.browser="webkit",/MSIE|\.NET|IEMobile/i.test(navigator.userAgent)&&(r.browser="ie"),r.size=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},r.extend=function(){var e,t=arguments[0]||{},o=1,n=arguments.length,a=!1;for(t.constructor==Boolean&&(a=t,t=arguments[1]||{},o=2),"object"!=typeof t&&"function"!=typeof t&&(t={}),1==n&&(t=this,o=0);n>o;o++)if(null!=(e=arguments[o]))for(var r in e)t!==e[r]&&(a&&e[r]&&"object"==typeof e[r]&&t[r]&&!e[r].nodeType?t[r]=psoft.extend(a,t[r],e[r]):void 0!=e[r]&&(t[r]=e[r]));return t},r.inherit=function(e){for(var t in e)s[t]&&function(t){var o=s[t];s[t]=function(){o.apply(this,arguments),e[t].apply(this,arguments)}}(t)},r.css=function(e,t,o,n){if("object"!=typeof t)return getComputedStyle(e,null).getPropertyValue(t);e.length||(e=[e]);for(var a=0;a<e.length;a++){var r,i=e[a];for(r in t)r in i.style?i.style[r]=t[r]:(str=";"+r+":"+t[r],i.style.cssText+=str)}o&&setTimeout(function(){o(e)},n)},r.classes={add:function(e,t){var o=e.className;this.have(e,t)||(o=o?o+" "+t:t.toString(),e.setAttribute("class",o))},remove:function(e,t){if(t){var o=e.className,o=o.replace(t,"").replace(/^\s+|\s+$/g,"");e.setAttribute("class",o)}else e.className=""},have:function(e,t){return RegExp("\\b"+t+"\\b").exec(e.className)}},r.scale=function(e){var t;(t=n("#debuggapScale"))&&t.parentNode.removeChild(t),e?i.scaleColor=e:e=i.scaleColor,e=[["top, transparent 4px, "+e+" 5px","10px 5px","100%","10px"],["top, transparent 24px, "+e+" 25px","20px 25px","100%","20px"],["left, transparent 4px, "+e+" 5px","5px 10px","10px","100%"],["left, transparent 24px, "+e+" 25px","25px 20px","20px","100%"]],t=document.createElement("div"),t.id="debuggapScale",r.classes.add(t,"dg-scale");for(var o=0;4>o;o++){var a=document.createElement("div"),s=e[o],s="background:"+r.css3Prefix+"linear-gradient("+s[0]+");background-size:"+s[1]+";height:"+s[2]+";width:"+s[3],s=s+";position:absolute;left:0px;top:0px;z-index:999;";a.setAttribute("style",s),t.appendChild(a)}n("#debuggapRoot").appendChild(t)},r.conf={scaleColor:"#cccccc",lineColor:"#cc6600"};var i={};r.draw={drawLi:function(e){var t=document.createElement("li");if(t.className="dg-node",8==e.nodeType)return e=e.nodeValue,e=e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;"),t.innerHTML='<pre class="pre"><span class="com">&lt;!--'+e+"--&gt;</span></pre>",t;if(3==e.nodeType)return t.innerHTML='<pre class="pre">'+e.nodeValue+"</pre>",t;if(10==e.nodeType)return t.style.color="#ccc",t.innerHTML="&lt;!DOCTYPE "+e.name+" "+e.publicId+" "+e.systemId+"&gt;",t;for(var o=e.tagName.toLowerCase(),n='<span class="tag">&lt;'+o+"</span>",a=e.attributes,i=null,s=0;s<a.length;s++)n+=' <span class="attr">'+a[s].name+'=</span><span class="val">"'+a[s].value+'"</span>';if(r.selfClosing[o])n+='<span class="tag">/&gt;</span>';else{if(n+='<span class="tag">&gt;</span>',e.childNodes.length){n+="...",i=document.createElement("span"),i.className="dg-right";var d=document.createElement("span");d.className="dg-tap"}n+='<span class="tag">&lt;/'+o+"&gt;</span>"}return t.innerHTML=n,i&&(t.appendChild(i),t.appendChild(d)),t},getRelation:function(e){for(var t=e.parentNode,o=[];;){for(var n=[],a=r.filterChildNodes(t,[1,3,8]),i=0;i<a.length;i++)"dg-child"!=a[i].className&&n.push(a[i]);for(a=0;a<n.length&&n[a]!=e;a++);if(o.unshift(a),"ul"==t.tagName.toLowerCase()&&"debuggapTree"==t.id)break;e=t.parentNode;do e=e.previousSibling;while(1!=e.nodeType);t=e.parentNode}return o},findRelation:function(e){var t,o=r.filterChildNodes(document,[1,3,8,10]);do{t=[];for(var n=0;n<o.length;n++)"debuggapRoot"!=o[n].id&&t.push(o[n]);o=e.shift(),t=t[o],o=r.filterChildNodes(t,[1,3,8,10])}while(e.length);return t},doAction:function(e){r.classes.have(e,"dg-rotate")?this.del(e):this.add(e.parentNode),delete e},add:function(e){var t=e.innerHTML,t=t.replace(/\.\.\.(.*?)<\/span>/,"");e.innerHTML=t;var t=this.getRelation(e),t=this.findRelation(t),o=r.filterChildNodes(t,[1,3,8]),a=document.createElement("li");a.className="dg-child";for(var i=document.createElement("ul"),s=0;s<o.length;s++)"debuggapRoot"!=o[s].id&&i.appendChild(this.drawLi(o[s]));return a.appendChild(i),o=document.createElement("li"),o.className="dg-child",o.innerHTML='<span class="tag">&lt;/'+t.tagName.toLowerCase()+"&gt;</span>",e.parentNode.insertBefore(o,e.nextSibling),e.parentNode.insertBefore(a,o),t=n(".dg-right",e),r.classes.add(t,"dg-rotate"),e},del:function(e){var t=e.parentNode;e=t.innerHTML;var o=e.match(/&lt;(.+?)<\/span>/)[1];return e=e.replace(/&gt;<\/span>/,'&gt;</span>...<span class="tag">&lt;/'+o+"&gt;</span>"),t.innerHTML=e,e=t.nextSibling,e.parentNode.removeChild(e),t.parentNode.removeChild(t.nextSibling),e=n(".dg-right",t),r.classes.remove(e,"dg-rotate"),r.classes.have(t,"line-wh")&&r.map.treeToEle(t),t}},r.extend({indexArray:function(e,t){for(var o=0;o<t.length;o++)if(t[o]==e)return o;return-1},inArray:function(e,t){return-1!=this.indexArray(e,t)?!0:!1},isArray:function(e){return"[object Array]"===toString.call(e)},each:function(e,t,o){if(void 0==e.length){for(var n in e)if(!1===t.call(e[n],n,e[n],o))break}else{n=0;for(var a=e.length;a>n&&!1!==t.call(e[n],n,e[n],o);n++);}},position:function(e){for(var t=0,o=0,n=e.clientWidth,a=e.clientHeight;e&&e!=document.body;)t+=e.offsetLeft,o+=e.offsetTop,e=e.offsetParent;return{left:t,top:o,width:n,height:a}},max:function(e,t){return e>t?e:t},min:function(e,t){return e>t?t:e},preName:function(e){return r.css3Prefix+e},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},createEle:function(e,t,o){e=document.createElement(e);for(var n in t)e.setAttribute(n,t[n]);return o&&(e.innerHTML=o),e},isFunction:function(e){return"function"==typeof e},filterChildNodes:function(e,t){t=t?t:[1,3,8];for(var o=[],n=e.childNodes,a=0;a<n.length;a++)!r.inArray(n[a].nodeType,t)||3==n[a].nodeType&&""==r.trim(n[a].nodeValue)||o.push(n[a]);return o},ajax:function(e,t,o){var n=new XMLHttpRequest;n.open(o?"POST":"GET",e,!0,"",""),n.setRequestHeader("Accept","text/plain, */*"),n.setRequestHeader("innerUse",!0),n.innerUse=!0,n.onreadystatechange=function(){n&&4==n.readyState&&(t(n),n=null,delete n)},n.send(o?o:null)},bind:function(e,t){return"string"==typeof t&&(t=e[t]),function(){t.apply(e,arguments)}}}),r.map={treeToEle:function(e){this.preShadowNode&&this.removeMap(this.preShadowNode),this.preShadowNode=e;var t=r.draw.getRelation(e),t=r.draw.findRelation(t);this.drawShadow(t),r.classes.add(e,"line-wh"),r.each(a("span",e),function(){r.classes.add(this,"font-wh")})},eleToTree:function(e){var t=r.map.getRelation(e);if(s.socketReady())s.doLeafStructure(t.join(",")),this.drawShadow(e),r.scale();else{r.doc.trigger(a("#debuggapBlock .dg-leaf")[0],"tap");var o=n("#debuggapTree");for(e=0;e<t.length-1;e++){var i=t[e],o=a("li",o)[i];r.draw.add(o),o=o.nextSibling}o=a("li",o)[t[e]],r.map.treeToEle(o)}},getRelation:function(e){var t=[],o=e;do{if(!o.parentNode)break;e=r.filterChildNodes(o.parentNode,[1,3,8,10]);for(var n=0;n<e.length&&e[n]!=o;n++);t.unshift(n),o=o.parentNode}while(o&&9!=o.nodeType);return t},removeMap:function(e){r.classes.remove(e,"line-wh"),r.each(a("span",e),function(){r.classes.remove(this,"font-wh")}),(e=n("#debuggapShadow"))&&debuggapNode.removeChild(e),r.each(a(".debuggapLine"),function(){debuggapNode.removeChild(this)}),this.preShadowNode=null},drawShadow:function(e){r.doc.bind(document,"taps",function(e){r.each(a("#debuggapTree,#debuggapScale,#debuggapShadow,#debuggapConfig,.debuggapLine"),function(){debuggapNode.removeChild(this)}),r.doc.unbind(document),e.preventDefault(),e.stopPropagation()});var t=n("#debuggapShadow");t&&debuggapNode.removeChild(t);for(var o=e.getBoundingClientRect(),t=["padding","border","margin"],i=["left","right","top","bottom"],s={},d=0;d<t.length;d++){s[t[d]]=[];var l="";"border"==t[d]&&(l="-width");for(var c=0;c<i.length;c++){var p=t[d]+"-"+i[c]+l;s[t[d]].push(parseInt(r.css(e,p)))}}e=o.left+document.body.scrollLeft;var l=o.top+document.body.scrollTop,g=o.width-s.border[0]-s.border[1],o=o.height-s.border[2]-s.border[3];e=Math.ceil(e-s.margin[0]);var l=Math.ceil(l-s.margin[2]),g=r.max(g-s.padding[0]-s.padding[1],0),o=r.max(o-s.padding[2]-s.padding[3],0),u=document.createElement("div");for(r.css(u,{width:g+"px",height:o+"px",opacity:.5,"background-color":"#3879d9"}),d=0;4>d;d++)s.margin[d]+=s.border[d];for(t.splice(1,1),c=0;c<t.length;c++){var h=t[c];if(0!=s[h][0]+s[h][1]+s[h][2]+s[h][3]){for(var f=document.createElement("div"),b={opacity:.8},d=0;d<i.length;d++)p="border-"+i[d],b[p]=s[h][d]+"px solid "+this.borderColor[h];r.css(f,b),f.appendChild(u),u=f}}r.css(u,{position:"absolute",left:e+"px",top:l+"px"}),u.id="debuggapShadow",debuggapNode.insertBefore(u,debuggapNode.childNodes[0]),this.drawLine(e,l,g+s.padding[0]+s.padding[1]+s.margin[0]+s.margin[1],o+s.padding[2]+s.padding[3]+s.margin[2]+s.margin[3])},drawLine:function(e,t,o,n){if(r.each(a(".debuggapLine"),function(){debuggapNode.removeChild(this)}),0!=o&&0!=n){var s=r.size().width,d=r.size().height;for(e=[[e,0,1,t],[e+o-1,0,1,t],[e,t+n,1,d-t-n],[e+o-1,t+n-1,1,d-t-n],[0,t,e,1],[e+o,t,s-e-o,1],[0,t+n-1,e,1],[e+o,t+n-1,s-e-o,1]],t=document.createDocumentFragment(),o=i.lineColor,n=0;n<e.length;n++)s=e[n],d=document.createElement("div"),r.css(d,{left:s[0]+"px",top:s[1]+"px",width:s[2]+"px",height:s[3]+"px",position:"absolute","background-color":o}),r.classes.add(d,"debuggapLine"),t.appendChild(d);debuggapNode.insertBefore(t,debuggapNode.childNodes[0])}},noMap:{html:1,head:1,script:1,style:1,meta:1,title:1,option:1},borderColor:{padding:"#329406",border:"#dd903f",margin:"#c56c0e"},preShadowNode:null},r.console={log:function(){var e=this.createLine();r.inArray(this.focus,["all","log"])||r.css(e,{display:"none"}),r.classes.add(e,"dg-l"),a("td",e)[1].innerHTML=this.concatArg(arguments)},warn:function(){var e=this.createLine();r.inArray(this.focus,["all","warn"])||r.css(e,{display:"none"}),r.classes.add(e,"dg-w"),a("td",e)[0].innerHTML='<div class="dg-warn"></div><div class="dg-type-con">!</div>',a("td",e)[1].innerHTML=this.concatArg(arguments)},error:function(){var e=this.createLine();r.inArray(this.focus,["all","error"])||r.css(e,{display:"none"}),r.classes.add(e,"dg-e"),a("td",e)[0].innerHTML='<div class="dg-error"></div><div class="dg-type-con">x</div>',a("td",e)[1].innerHTML="<span style='color:red'>"+this.concatArg(arguments)+"</span>"},concatArg:function(e){for(var t="",o=0,n=e.length;n>o;o++)t+=" "+e[o];return t},tryCatch:function(e){this.history[0]!=e&&this.history.unshift(e),this.createLine(e);try{e=/(for|while)/.exec(e)?'return new Function("'+e+'")()':"return "+e;var t=new Function(e)();t?"string"==typeof t?t='<span style="white-space:pre;color:#cb4416;">'+t.replace(/\>/g,"&gt;").replace(/\</g,"&lt;")+"</span>":"function"==typeof t&&(t='<span style="white-space:pre">'+t+"</span>"):t+="",this.log(t)}catch(o){this.error(o.name+": "+o.message)}},createLine:function(e){var t=document.createElement("tr");return t.innerHTML="<td></td><td></td>",r.each(a("td",t),function(t){this.innerHTML=1==t&&e?'<span style="color:blue;">'+e+"</span>":""}),r.classes.add(a("td",t)[0],"dg-type"),r.classes.add(a("td",t)[1],"dg-con"),n("table",n("#debuggapConsole .dg-console")).appendChild(t),t},history:[],index:-1,up:function(){this.index++,this.index<this.history.length?n("#debuggapInput").value=this.history[this.index]:this.index--},down:function(){this.index--,0>this.index?(n("#debuggapInput").value="",this.index=-1):n("#debuggapInput").value=this.history[this.index]},go:function(){var e=n("#debuggapInput");e.value&&(this.tryCatch(e.value),this.index=-1,e.value="")},clean:function(){var e=n(".dg-console",n("#debuggapConsole")),e=a("tr",e);r.each(e,function(){this.parentNode.removeChild(this)})},focus:"all",filter:function(e){var t=e.innerHTML;if("clean"==t.toLowerCase())return this.clean(),!0;this.focus=t.toLowerCase(),r.each(a("span",e.parentNode),function(){this==e?r.classes.add(this,"dg-console-focus"):r.classes.remove(this,"dg-console-focus")});var t=t.toLowerCase()[0],o=n(".dg-console",n("#debuggapConsole")),i="a"==t?{display:"table-row"}:{display:"none"};r.each(a(".dg-l,.dg-e,.dg-w",o),function(){r.css(this,i)}),"a"!=t&&r.each(a(".dg-"+t),function(){r.css(this,{display:"table-row"})})},overwrite:function(){for(var e=["log","warn","error"],t=0;t<e.length;t++){var a=console[e[t]];!function(e,t){console[t]=function(){e.apply(this,arguments),n("#debuggapConsole")&&r.console[t].apply(r.console,arguments),o(t+"Cmd:"+s._transformCmd(arguments[0]))}}(a,e[t])}a=null,delete null,delete a}},r.event={eventIndex:1,inWrap:function(e,t){var o=e.left+e.width,n=e.top+e.height,a=t.pageX,r=t.pageY;return a>e.left&&r>e.top&&o>a&&n>r?!0:void 0},register:function(e){if(!(this instanceof arguments.callee))return!0;var t=e.parentNode,o=0,n=0,a={};this.bind=function(e,t,o){var n;"string"==typeof e?(n=a[e])?n[t]=o:(n={},n[t]=o,a[e]=n):e.dgEventIndex?(n=a[e.dgEventIndex])?n[t]=o:(n={},n[t]=o,a[e.dgEventIndex]=n):(e.dgEventIndex=r.event.eventIndex++,n={},n[t]=o,a[e.dgEventIndex]=n)},this.unbind=function(e){e.dgEventIndex&&a[e.dgEventIndex]&&(a[e.dgEventIndex]=null,delete a[e.dgEventIndex])},this.trigger=function(e,t){var o;(o=a[e.dgEventIndex])&&o[t].call(e,null)},this.destroy=function(){a=null,e.removeEventListener("touchmove",s,!1),e.removeEventListener("touchend",d,!1),e.removeEventListener("touchstart",i,!1),i=d=s=null};var i=function(e){var i=e.touches&&e.touches[0]||e,s=i.target;for(n=0;s!=t&&s;){var d=a[s.dgEventIndex];if(d&&d.scroll)return e=d.scroll,o=0,n=1,e.dgOx=i.pageX,e.dgOy=i.pageY,r.css(e,{"-webkit-transition":""}),i=(e.style.WebkitTransform?e.style.WebkitTransform:"translate(0px,0px)").match(/translate\(([^\)]*)\)/)[1].split(","),e.dgX=parseInt(i[0]),e.dgY=parseInt(i[1]),!0;if(d&&d.move&&(o=0),d&&d.taps&&d.taps.call(s,e))return!0;s=s.parentNode}},s=function(e){for(var n=e.touches[0],r=n.target;r!=t&&r;){var i=a[r.dgEventIndex];if(i&&i.scroll)return r=i.scroll,o=1,n=Math.abs(n.pageY-r.dgOy)>Math.abs(n.pageX-r.dgOx)?"translate("+r.dgX+"px,"+(n.pageY-r.dgOy+r.dgY)+"px) ":"translate("+(n.pageX-r.dgOx+r.dgX)+"px,"+r.dgY+"px) ",r.style.WebkitTransform=n,e.preventDefault(),!0;if(i&&i.move&&(o=1,e.preventDefault(),e.stopPropagation(),i.move.call(r,e)))return!0;r=r.parentNode}},d=function(e){for(var i=e.changedTouches[0],s=i.target;s!=t&&s;){var d=s.dgEventIndex,l=(s.tagName||"").toLowerCase();if((d=a[d]?a[d]:a[l])&&d.tap&&!o){if(1==s.nodeType)var c=r.position(s);else n=1;if((n||r.event.inWrap(c,i))&&d.tap.call(s,e))return!0}if(d&&d.scroll&&o)return e=d.scroll,o=0,i=(e.style.WebkitTransform?e.style.WebkitTransform:"translate(0px,0px)").match(/translate\(([^\)]*)\)/)[1].split(","),e.dgX=parseInt(i[0]),e.dgY=parseInt(i[1]),i=r.max(e.scrollHeight-parseInt(r.css(e.parentNode,"height")),0),s=r.max(e.scrollWidth-parseInt(r.css(e.parentNode,"width")),0),d=c="",l=0,0<e.dgY?(d="0px",l=1):Math.abs(e.dgY)>i&&(d="-"+i+"px",l=1),0<e.dgX?(c="0px",l=1):Math.abs(e.dgX)>s&&(c="-"+s+"px",l=1),l&&(c||(c=e.dgX+"px"),d||(d=e.dgY+"px"),r.css(e,{"-webkit-transition":"-webkit-transform 0.5s","-webkit-transform":"translate("+c+","+d+")"})),!0;s=s.parentNode}};e.addEventListener("touchmove",s,!1),e.addEventListener("touchend",d,!1),e.addEventListener("ie"==r.browser?"mousedown":"touchstart",i,!1)}},e.prototype={tryMaxTimes:1,currentTimes:0,readyState:0,timeout:10,getSocketData:function(){var e=document.createElement("script");e.src=(0==this.readyState?this.url+"/init":this.url)+"?_d="+(new Date).getTime(),e.id="socket_script",e.onload=r.bind(this,"success"),e.onerror=r.bind(this,"error"),document.head.appendChild(e)},closeSocket:function(){var e=document.createElement("script");e.src=this.url+"/close?_d="+(new Date).getTime(),document.head.appendChild(e)},send:function(e){r.ajax(this.url,function(){},e)},success:function(){this._finish(),setTimeout(r.bind(this,"getSocketData"),this.timeout)},error:function(){this._finish(),this.currentTimes++!=this.tryMaxTimes?setTimeout(r.bind(this,"getSocketData"),this.timeout):(delete localStorage.scriptSocket,this.onclose&&this.onclose())},_finish:function(){document.head.removeChild(document.getElementById("socket_script"))},close:function(){}},r.scriptSocket={handShake:function(){d&&(d.readyState=1,d.onopen())},handle:function(e){d&&d.onmessage({data:e})}},function(){var e={},t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(o,n){try{var a,r=1e3*(new Date).getTime()+Math.floor(1e3*Math.random()),i=n,s=i;"http"!=i.slice(0,4)&&("/"==i.slice(0,1)?s=location.protocol+"//"+location.host+i:"./"==i.slice(0,2)&&(s=(location.protocol+"//"+location.host+location.pathname).replace(/\/.[^\/]*$/,"/")+i.slice(2))),a=s,("http"==a.slice(0,4)||"file"==a.slice(0,4))&&(this.uniqueId=r,e[r]={method:o,url:a,header:{}})}catch(d){}t.apply(this,arguments)};var n=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(t,o){this.uniqueId&&(e[this.uniqueId].header[t]=o),n.apply(this,arguments)};var a=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(t){if(this.setRequestHeader("XHR",!0),this.uniqueId)if(this.innerUse)e[this.uniqueId]=null,delete e[this.uniqueId],a.apply(this,arguments);else{if(e[this.uniqueId].body=t,"http"==e[this.uniqueId].url.slice(0,4)){var n=e[this.uniqueId].url.match(/([^:]+):\/\/([^\/\#\?]+)([^?#]*)([^#]*)(.*)/),r=n[2].split(":")[0],i=n[2].split(":")[1]?n[2].split(":")[1]:"",n={method:e[this.uniqueId].method,id:this.uniqueId,requestHeaders:e[this.uniqueId].header,httpVersion:"HTTP/1.1",location:{protocol:n[1],host:r,port:i,hostname:n[2],hash:n[5],search:n[4],pathname:n[3],href:n[0]}};t&&(n.payload=t),o("initRequest:"+JSON.stringify(n))}var s=(new Date).getTime(),d=this,l=!1,c=function(){if(!l){l=!0;var t,n;try{t=d.getAllResponseHeaders(),n=d.responseText}catch(a){n=t=""}if("http"==e[d.uniqueId].url.slice(0,4)){var r=t.split("\r\n");t={};for(var i,c=0;c<r.length;c++)(i=r[c])&&(i=i.split(":"),t[i[0]]=i[1]);t={host:location.host,times:(new Date).getTime()-s,size:n.length,responseHeaders:t,data:n,id:d.uniqueId,statusCode:d.status},o("resultRequest:"+JSON.stringify(t))}}},p=setInterval(function(){4==d.readyState&&(clearInterval(p),c(),e[d.uniqueId]=null,delete e[d.uniqueId])},5),g=function(){if(d.onreadystatechange){clearInterval(u);var e=d.onreadystatechange;d.onreadystatechange=function(){4==d.readyState&&c(),e&&e()}}},u=setInterval(function(){g()},0);g(),a.apply(d,arguments)}}}(),r.init={setting:function(){},addWrap:function(){if(!(debuggapNode=n("#debuggapRoot"))){var e=document.createElement("div");e.id="debuggapRoot",document.body.appendChild(e),debuggapNode=e,r.init.addStyle(),r.init.addConsole(),r.init.addBlock(),"ie"==r.browser&&r.css(n("#debuggapBlock"),{display:"none"})}},addStyle:function(){var e=document.createElement("style");e.innerHTML="body{-webkit-text-size-adjust:100%}#debuggapRoot input{font-size:14px;-webkit-appearance:none;}#debuggapRoot .dg-block{white-space:nowrap;margin: 0px;padding: 20px;}#debuggapRoot td{font-family: arial,sans-serif;letter-spacing: 1px;}#debuggapRoot .dg-scale{}#debuggapRoot li{list-style:none;padding-left:15px;position:relative;font-size:15px;font-family:arial,sans-serif;line-height:18px;text-align:left;}#debuggapRoot ul{list-style:none;padding-left:0px;margin:0px;}span.dg-down{display:inline-block;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #515151;width:0px;height:0px;position:absolute;left:0px;top:3px;}span.dg-right{-webkit-transition:-webkit-transform 0.5s;transition:transform 0.5s;display:inline-block;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:10px solid #515151;width:0px;height:0px;position:absolute;left:0px;top:3px;}span.dg-tap{height:18px;padding:0px 25px;left:-30px;position:absolute;}span.dg-rotate{-webkit-transform:rotate(90deg);transform:rotate(90deg);}#debuggapRoot .tag{color:#a5129f;}#debuggapRoot .attr{color:#994500}#debuggapRoot .val{color:#1a1a7e;}#debuggapRoot .com{color:#236e25;}#debuggapRoot .pre{margin:0px;padding:0px;}#debuggapRoot .font-wh{color:#fff;}#debuggapRoot .line-wh{color:#fff;background-color:#3879d9;}#debuggapTree {position:absolute;}.debuggapFull {background-color:rgba(255,255,255,0.5);position:absolute;left:0px;top:0px;right:0px;bottom:0px;z-index:999;overflow:hidden;}.debuggapFull0 {background-color:rgba(255,255,255,1);position:absolute;left:0px;top:0px;right:0px;bottom:0px;z-index:999;overflow:hidden;}#debuggapRoot .dg-out{background-color: transparent;position: absolute;z-index: 999;top: 20px;right: 20px;border: 2px solid #00abe3;border-radius: 30px;width: 30px;height: 30px;box-sizing: content-box;}#debuggapRoot .dg-inner{width:20px;height: 20px;background: #ccc;margin: 5px;border-radius: 20px;background-color: #00abe3;}#debuggapConsole{display:none;padding:10px;margin:0px;}#debuggapConsole .dg-console{overflow:hidden;border-top:1px solid #ccc;margin-top:2px;}#debuggapConsole .dg-console tr{display:table-row}#debuggapInput {width:100%;line-height:16px;padding:2px;margin:0px;border:1px solid #ccc;outline-style:none;}#debuggapConsole .dg-up{border-left:8px solid transparent;border-bottom:16px solid #515151;border-right:8px solid transparent;width:0px;height:0px;position:absolute;left:0px;top:7px;}#debuggapConsole .dg-go{border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:16px solid #515151;width:0px;height:0px;position:absolute;right:0px;top:2px;}#debuggapConsole .dg-down{border-top:16px solid #515151;border-right:8px solid transparent;border-left:8px solid transparent;width:0px;height:0px;position:absolute;left:0px;top:7px;}#debuggapConsole .dg-upP{width:20px;height:25px;position:absolute;left:0px;top:0px;}#debuggapConsole .dg-downP{width:20px;height:25px;position:absolute;left:25px;top:0px;}#debuggapConsole .dg-goP{width:30px;height:20px;position:absolute;right:0px;top:0px;}#debuggapConsole .dg-type{width:20px;height:16px;text-align:center;position:relative;}#debuggapConsole .dg-con{border-bottom:1px solid #ccc;font-size:11px ! important;word-break:break-all;}#debuggapConsole .dg-error{border:6px solid #d80c15;border-radius:6px;width:0px;height:0px;position:absolute;left:0px;top:1px;}#debuggapConsole .dg-type-con{width:10px;height:10px;position:absolute;left:1px;top:1px;color:#fff;line-height:10px;font-size:14px;}#debuggapConsole .dg-warn{border-left:6px solid transparent;border-bottom:12px solid #f4bd00;border-right:6px solid transparent;width:0px;height:0px;position:absolute;left:0px;top:1px;}#debuggapConsole .dg-console-info{padding:0px 5px;color:#fff;background-color:#a8a8a8;border-radius:10px;margin-right:5px;font-size:14px;}#debuggapConsole .dg-console-focus{background-color:rgb(0,171,227);}#debuggapConfig {padding:10px;margin:0px;}#debuggapConfig .dg-conf-bts{height:30px;overflow:hidden;}#debuggapConfig .dg-conf-left{border-radius:5px;float:left;background-color:rgb(0,171,227);color:#fff;border:0px}#debuggapConfig .dg-conf-right{border-radius:5px;float:right;background-color:rgb(0,171,227);color:#fff;border:0px;}#debuggapBlock {}#debuggapBlock .dg-leaf{width:70px;height:70px;border-radius:30px;text-align:center;line-height:70px;color:#fff;margin:1px;float:left;background-color:rgba(0,171,227,0.7);}#debuggapBlock .dg-flower{width:144px;height:144px;position:absolute;z-index:999;left:50%;top:50%;margin-left:-72px;margin-top:-72px;opacity:0;display:none;-webkit-transition:opacity 0.5s;}#debuggapBlock .dg-center{width:50px;height:50px;position:absolute;left:47px;top:47px;border-radius:50px;text-align:center;line-height:50px;color:#fff;margin:1px;float:left;background-color:rgba(0,171,227,1);}",debuggapNode.appendChild(e)},addBlock:function(){var e=document.createElement("div");e.id="debuggapBlock",e.innerHTML='<div id="debuggapScrim" class="debuggapFull" style="display:none;"></div><div class="dg-flower" class="dg-flower"><div class="dg-leaf" style="border-top-left-radius:0px;">Nodes</div><div class="dg-leaf" style="border-top-right-radius:0px;">Inspect</div><div class="dg-leaf" style="border-bottom-left-radius:0px;">Config</div><div class="dg-leaf" style="border-bottom-right-radius:0px;" >Console</div><div class="dg-center">Close</div></div><div class="dg-out"><div class="dg-inner"></div></div>',debuggapNode.appendChild(e)},addConsole:function(){var e=document.createElement("div");e.id="debuggapConsole",e.innerHTML='<table border=0 cellpadding="0" cellspacing="0" width=100%><tr><td><input type="txt" id="debuggapInput"/></td><td> <div style="position:relative;width:25px;height:22px;"><div class="dg-goP"><div class="dg-go"></div></div></div></td></tr><tr><td colspan=2 ><div style="height:25px;width:100%;position:relative;"><div class="dg-upP"><div class="dg-up"></div></div><div class="dg-downP"><div class="dg-down"></div></div><div style="position:absolute;right:0px;top: 7px;"><span class="dg-console-info dg-console-focus">All</span><span class="dg-console-info">Error</span><span class="dg-console-info">Warn</span><span class="dg-console-info">Log</span><span class="dg-console-info">Clean</span> </div></div></td></tr></table><div class="dg-console"><table border=0 cellpadding="0" cellspacing="0" width=100%></table></div>',debuggapNode.appendChild(e)},showTree:function(){var e=document.createElement("ul");e.id="debuggapTree",r.classes.add(e,"dg-block");for(var t=0;t<document.childNodes.length;t++){var o=debuggap.draw.drawLi(document.childNodes[t]);e.appendChild(o)}debuggapNode.appendChild(e),r.scale(),r.classes.add(n("#debuggapRoot"),"debuggapFull"),r.css(n("#debuggapTree"),{"min-width":debuggap.size.width+"px","min-height":debuggap.size.height+"px"})},destroyTree:function(){debuggapNode.removeChild(n("#debuggapTree")),debuggapNode.removeChild(n("#debuggapScale")),r.classes.remove(debuggapNode,"debuggapFull")},showConfig:function(){if(!n("#debuggapConfig")){var e=document.createElement("div");e.id="debuggapConfig",e.innerHTML='<table width="100%" border=0><caption>Config Setting</caption><tr><td>scale color:</td><td><input type="txt" id="scaleColor"/></td></tr><tr><td>line color:</td><td><input type="txt" id="lineColor"/></td></tr></table><div class="dg-conf-bts"><input class="dg-conf-left" type="button" value="reset"/><input class="dg-conf-right"  type="button" value="modify"/></div><hr/>click the following button to connect to remote DebugGap<br/><div class="dg-socket-bts"><b>Server</b> : <input type="txt" id="dgSocketHost" style="width:100px"> : <input type="txt" id="dgSocketPort" style="width:50px"> <input class="dg-conf-right" id="dgConnect" type="button" value="Connect"/></div>',debuggapNode.appendChild(e);for(var t in i)n("#"+t)&&(n("#"+t).value=i[t])}},daemon:function(){var e=0,t=setInterval(function(){n("#debuggapRoot")||r.init.addWrap(),10<=++e&&(r.start(),clearInterval(t))},200)},reconnect:function(){var e=r._getCurrentAddr();e&&2==e.length&&(localStorage.host=e[0],localStorage.port=e[1],localStorage.protocal="websocket",localStorage.name="debuggap_client",localStorage.expired=(new Date).getTime()+36e5),"ie"==r.browser&&2!=e.length?alert('Please include debuggap.js with remote address in IE.\nsuch as:\n<script src="debuggap.js?192.168.1.4:11111"></script>'):localStorage.expired&&(new Date).getTime()<localStorage.expired&&(r.extend(r.conf,{host:localStorage.host,port:localStorage.port,protocal:localStorage.protocal,name:localStorage.name}),r.initSocket(r.conf))}},r.ready=function(){debuggap.extend(i,r.conf),r.console.overwrite(),r.init.addWrap(),r.init.daemon(),r.init.reconnect()},r.start=function(){var e=new r.event.register(document);r.doc=e,e.bind(n("#debuggapBlock .dg-out"),"tap",function(){e.unbind(document);var t=n("#debuggapBlock .dg-flower");return 0==r.css(t,"opacity")?(r.css(n("#debuggapScrim"),{display:"block"}),r.css(n(".dg-out"),{display:"none"}),r.css(t,{opacity:1,display:"block"})):r.css(t,{opacity:0},function(e){r.css(e,{display:"none"})},500),!0}),e.bind(n("#debuggapBlock .dg-out"),"move",function(e){var t=e.touches[0];e=t.pageX;var t=t.pageY,o=r.size().width-40,n=r.size().height-40;return 10>e?e=10:e>o&&(e=o),10>t?t=10:t>n&&(t=n),r.css(this,{top:t+"px",left:e+"px"}),!0}),e.bind("span","tap",function(){if(r.classes.have(this,"dg-tap")){var e=n(".dg-right",this.parentNode);return r.draw.doAction(e),!0}return r.classes.have(this,"dg-console-info")?(r.console.filter(this),!0):void 0}),e.bind("li","tap",function(){if(r.classes.have(this,"dg-node")){var e=this.innerHTML.match(/&lt;(.*?)<\/span>/)[1];return r.map.noMap[e]||(r.classes.have(this,"line-wh")?r.map.removeMap(this):r.map.treeToEle(this)),!0}}),e.bind("input","tap",function(){if(this.parentNode&&"dg-conf-bts"==this.parentNode.className){if("reset"==this.value)for(var e in i)n("#"+e)&&(i[e]=n("#"+e).value=r.conf[e]);else for(e in i)n("#"+e)&&(i[e]=n("#"+e).value);return!0}this.parentNode&&"dg-socket-bts"==this.parentNode.className&&"button"==this.type&&(r.extend(r.conf,{host:n("#dgSocketHost").value,port:n("#dgSocketPort").value,protocal:"websocket",name:"debuggap_client"}),localStorage.host=r.conf.host,localStorage.port=r.conf.port,localStorage.protocal=r.conf.protocal,localStorage.name=r.conf.name,localStorage.expired=(new Date).getTime()+36e5,this.value="Connecting",r.initSocket(r.conf))}),e.bind(n("#debuggapScrim"),"tap",function(){return r.css(this,{display:"none"}),r.css(n("#debuggapBlock .dg-flower"),{opacity:0},function(e){r.css(e,{display:"none"})},500),r.css(n(".dg-out"),{display:"block"}),!0}),e.bind(a("#debuggapBlock .dg-leaf")[0],"tap",function(){return e.trigger(n("#debuggapBlock .dg-center"),"tap"),r.init.showTree(),e.bind(n("#debuggapRoot"),"scroll",n("#debuggapTree")),!0}),e.bind(a("#debuggapBlock .dg-leaf")[1],"tap",function(t){return e.trigger(n("#debuggapBlock .dg-center"),"tap"),e.bind(n("#debuggapRoot"),"scroll",null),e.bind(document,"taps",function(t){e.unbind(document);var o=t.changedTouches[0].target;r.inArray(o.className,["dg-inner","dg-out"])||r.map.eleToTree(o),t.preventDefault()}),t&&t.preventDefault(),t&&t.stopPropagation(),!0}),e.bind(a("#debuggapBlock .dg-leaf")[2],"tap",function(t){e.trigger(n("#debuggapBlock .dg-center"),"tap"),r.classes.add(n("#debuggapRoot"),"debuggapFull0"),r.init.showConfig(),t="";try{t=JSON.parse(t),t=t.split(":"),n("#dgSocketHost").value=t[0],n("#dgSocketPort").value=t[1]
}catch(o){localStorage.host&&(n("#dgSocketHost").value=localStorage.host,n("#dgSocketPort").value=localStorage.port)}return!0}),e.bind(a("#debuggapBlock .dg-leaf")[3],"tap",function(){return e.trigger(n("#debuggapBlock .dg-center"),"tap"),r.css(n("#debuggapConsole"),{display:"block"}),r.classes.add(n("#debuggapRoot"),"debuggapFull0"),e.bind(n("#debuggapRoot"),"scroll",n("#debuggapConsole .dg-console table")),r.css(n("#debuggapConsole .dg-console"),{height:r.size().height-65+"px"}),!0}),e.bind(n("#debuggapBlock .dg-center"),"tap",function(){return e.trigger(n("#debuggapScrim"),"tap"),r.each(a("#debuggapTree,#debuggapScale,#debuggapShadow,#debuggapConfig,.debuggapLine"),function(){debuggapNode.removeChild(this)}),r.css(n("#debuggapConsole"),{display:"none"}),r.classes.remove(debuggapNode),!0}),n("#debuggapInput").addEventListener("keypress",function(e){13!=e.which&&13!=e.keyCode||r.console.go()},!1),e.bind(n("#debuggapConsole .dg-upP"),"tap",function(){r.console.up()}),e.bind(n("#debuggapConsole .dg-goP"),"tap",function(){r.console.go()}),e.bind(n("#debuggapConsole .dg-downP"),"tap",function(){r.console.down()})};var s={remoteClientReady:!1,socketReady:function(){return d&&1==d.readyState&&s.remoteClientReady},doReady:function(){console.log("Socket connected successfully")},doInit:function(){this.remoteClientReady=!0,this.preCookie=this.preSessionStorage=this.preLocalStorage="";var e;e=""+(r.indexArray(document.body.parentNode,r.filterChildNodes(document,[1,3,8,10]))+","),e+=r.indexArray(document.body,r.filterChildNodes(document.body.parentNode,[1,3,8,10])),this.doAllStructure(e),o("deviceInfo:"+navigator.userAgent)},doAllStructure:function(e){e=s._getStructure(e),o("allStructure:"+JSON.stringify(e))},doLeafStructure:function(e){var t=e.lastIndexOf(","),n=e.substr(t+1);e=e.substr(0,t),e=s._getStructure(e),o("leafStructure:"+n+";"+JSON.stringify(e))},doGetChildren:function(e){for(var t,n=e.split(","),a=s._getStructure(e);n.length;)t=n.shift(),a=a[t].c;o("addChildren:"+e+";"+JSON.stringify(a))},doGetChildrenV2:function(e){var t=e.slice(0,13);e=e.slice(14);for(var n,a=""==e?[]:e.split(","),r=s._getStructure(e);a.length;)n=a.shift(),r=r[n].c;o("childrenList:"+t+";"+e+";"+JSON.stringify(r))},_getStructure:function(e){e=""==e?[]:e.split(",");for(var t,o=document,n=[],a=n;e.length;){t=r.filterChildNodes(o,[1,3,8,10]);for(var i=parseInt(e.shift()),s=0;s<t.length;s++)if("debuggapRoot"==t[s].id)t.splice(s,1),s--;else{var d=this._getTagAndAttr(t[s]);n.push(d),s==i&&(o=t[i])}n=n[i].c}for(t=r.filterChildNodes(o,[1,3,8,10]),s=0;s<t.length;s++)"debuggapRoot"!=t[s].id&&(d=this._getTagAndAttr(t[s]))&&n.push(d);return a},_getTagAndAttr:function(e){var t={t:e.nodeName.toLowerCase(),c:0<e.childNodes.length?[]:!1};if(1==e.nodeType){t._dg_t=t.t,t.c&&1==e.childNodes.length&&3==e.childNodes[0].nodeType&&20>e.childNodes[0].nodeValue.length&&(t.cs=e.childNodes[0].nodeValue),e=e.attributes;for(var o=0;o<e.length;o++)t.a||(t.a={}),t.a[e[o].name]=e[o].value}else 10==e.nodeType?(t.s="<!DOCTYPE "+e.name+" "+e.publicId+" "+e.systemId+">",delete t.t):(t.s=e.nodeValue,t._dg_t=t.t);return t},doFile:function(e){setTimeout(function(){r.ajax(e,function(t){o("fileCon:"+e+"_dg_"+t.responseText)})},100)},doCmd:function(e){try{var t=new Function("return "+e)(),t=this._transformCmd(t);o("cmdResult:"+t)}catch(n){t=n.name+": "+n.message,console.error(t)}},_transformCmd:function(e){if(e&&r.inArray(e.nodeType,[1,3,8,9])){var t=r.map.getRelation(e);e=s._getTagAndAttr(e),e.relation=t,e=JSON.stringify(e)}else if("[object Array]"==Object.prototype.toString.call(e))try{e=JSON.stringify(e)}catch(o){e=this._objectToString(e),e=JSON.stringify(e)}else"[object Object]"==Object.prototype.toString.call(e)&&(e=this._objectToString(e),e=JSON.stringify(e));return e},_objectToString:function(e){var t,o=Object.keys(e),n={};e.length&&(n=[]);for(var a=0,i=o.length;i>a;a++)if(t=o[a],e[t]&&r.inArray(e[t].nodeType,[1,3,8,9])){var d=r.map.getRelation(e[t]),l=s._getTagAndAttr(e[t]);l.relation=d,n[t]={v:e[t].toString(),element:l}}else n[t]=e[t]&&"object"==typeof e[t]&&Object.keys(e[t]).length?arguments.callee(e[t]):"function"==typeof e[t]?{v:e[t].toString().match(/[^\n{]+/)[0]+"{...}",tag:"func"}:"[object RegExp]"==Object.prototype.toString.call(e[t])?{v:e[t].toString(),tag:"reg"}:e[t];return n},doFileTree:function(){this._doFileStart(location.href.replace(location.hash,""));for(var e=document.scripts,t=0;t<e.length;t++)e[t].src&&"chrome-extension"!=e[t].src.substr(0,16)&&this._doFile(e[t].src);for(e=document.styleSheets,t=0;t<e.length;t++)e[t].href&&this._doFile(e[t].href);o("fileTree:"+JSON.stringify([this._sPre,this._sTitle,this._sFiles]))},_doFile:function(e){e=e.replace(this._sPre,""),e=e.split("/");var t=this._sFiles;if(1==e.length)t.push(e[0]);else{for(var o=0;o<e.length-1;o++){for(var n=e[o],a=t.length,r=!1,i=0;a>i;i++)if("string"!=typeof t[i]&&t[i][n]){t=t[i][n],r=!0;break}if(!r){o=e.slice(o,-1),t=this._sCreateTree(t,o);break}}t.push(e[e.length-1])}t.sort(function(e,t){return e>t?1:-1})},_sCreateTree:function(e,t){for(var o=0;o<t.length;o++){var n={};n[t[o]]=[];var n=e.push(n),a=e;e=e[n-1][t[o]],a.sort(function(e,t){var o="string"==typeof e,n="string"==typeof t;return o&&n?e>t?-1:1:o?1:n?-1:Object.keys(e)[0]>Object.keys(t)[0]?-1:1})}return e},_doFileStart:function(e){this._sPre=e.substring(0,e.lastIndexOf("/")+1),this._sFiles=[],this._sTitle=e.substring(e.lastIndexOf("/")+1)},preLocalStorage:"",doLocalStorage:function(){var e=this._addDot(localStorage);e!=this.preLocalStorage&&(this.preLocalStorage=e,o("localStorage:"+e))},preSessionStorage:"",doSessionStorage:function(){var e=this._addDot(sessionStorage);e!=this.preSessionStorage&&(this.preSessionStorage=e,o("sessionStorage:"+e))},_addDot:function(e){var t,o={};for(t in e)o[t]=e[t].substr(0,250),250<e[t].length&&(o[t]+="...");return JSON.stringify(o)},preCookie:"",doCookie:function(){var e=document.cookie;e!=this.preCookie&&(this.preCookie=e,o("cookie:"+e))},doDelLocalStorage:function(e){localStorage[e]=null,delete localStorage[e]},doDelSessionStorage:function(e){sessionStorage[e]=null,delete sessionStorage[e]},doDelCookie:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=0; expires="+t.toGMTString()},doCacheFile:function(e){var t=e.indexOf("_dg_");if(!(1>t)){var o=e.substring(0,t);e=e.substring(t+4),t=o.substring(o.lastIndexOf(".")+1),"js"==t?this._doCacheJs(o,e):"css"==t&&this._doCacheCss(o,e)}},_doCacheJs:function(e,t){n('script[_src="'+e+'"]')&&n('script[_src="'+e+'"]').remove(),n("#debuggapRoot").appendChild(r.createEle("script",{_src:e},t))},_doCacheCss:function(e,t){var o=null,o=n('style[_href="'+e+'"]')?n('style[_href="'+e+'"]'):s.deepFinder("link",e);o.parentNode.insertBefore(r.createEle("style",{_href:e},t),o),o.remove()},doRelationToEle:function(e){e=e.split(","),e=r.draw.findRelation(e),1==e.nodeType&&(r.doc.trigger(n("#debuggapBlock .dg-center"),"tap"),r.map.drawShadow(e),r.scale())},doGetCalculateCss:function(e){e=e.split(","),e=r.draw.findRelation(e),this._getCalculateCss(e)},_getCalculateCss:function(e){e=t(e),o("calculateCss:"+JSON.stringify(e))},_resetCssForElement:function(e){r.map.drawShadow(e),this._getCalculateCss(e)},doAddCssForElement:function(e){e=e.split(";");var t=r.draw.findRelation(e[0].split(",")),o=t.getAttribute("style"),o=o?o.replace(/;*$/,";"):"";t.setAttribute("style",o+e[1]),this._getCalculateCss(t)},doRemoveCssForElement:function(e){e=e.split(";");var t=r.draw.findRelation(e[0].split(",")),o=r.trim(t.getAttribute("style")),o=o.replace(/^;+|;+$/g,""),o=o.split(";");o.splice(parseInt(e[1]),1),o=o.join(";"),t.setAttribute("style",o),this._getCalculateCss(t)},doReplaceCssForElement:function(e){e=e.split(";");var t=r.draw.findRelation(e[0].split(",")),o=r.trim(t.getAttribute("style")),o=o.replace(/^;+|;+$/g,""),o=o.split(";");o[e[1]]=e[2],o=o.join(";"),t.setAttribute("style",o),this._getCalculateCss(t)},styleCache:{},doActiveCssForElement:function(e){e=e.split(";");var t=r.draw.findRelation(e[0].split(",")),o=r.trim(t.getAttribute("style")),o=o.replace(/^;+|;+$/g,"");(o=o.split(";"))&&o[e[1]]&&(o[e[1]]="active"==e[2]?o[e[1]].replace(/\/\*+([^*]+)\*+\//,"$1"):"/*"+o[e[1]]+"*/",o=o.join(";"),t.setAttribute("style",o)),this._getCalculateCss(t)},doReplaceClassItem:function(e){var t=e.split(";");e=r.draw.findRelation(t[0].split(","));var o=t[1].split(":"),t=decodeURIComponent(t[2]);if(o&&"undefined"!=typeof o[1]){var n=document.styleSheets[o[0]],a=o[1];if(3==o.length){var i=this._getMediaCss(n.cssRules[a]);i[o[2]]=t,t=n.cssRules[a].cssText.match(/@\s*media\s+[^{]+/)[0]+"{\n"+i.join("\n")+"\n}"}"ie"==r.browser?n.deleteRule(a):n.removeRule(a),n.insertRule(t,a)}this._getCalculateCss(e)},_getMediaCss:function(e){var t=[];if(e=e.cssRules)for(var o=0,n=e.length;n>o;o++)t.push(e[o].cssText);return t},doGetPrompt:function(e){var t=e.substr(0,e.indexOf(":"));e=e.substr(e.indexOf(":")+1).split(".");for(var n=window,a=e.length,r=0;a-1>r;r++)try{n=n[e[r]]}catch(i){o("prompt:"+t+":"+JSON.stringify({msg:i.message}))}try{var s=[],d=RegExp("^"+e[a-1]);for(r in n)d.test(r)&&s.push(r);o("prompt:"+t+":"+JSON.stringify(s))}catch(l){}},doCleanInspect:function(){r.doc.trigger(n("#debuggapBlock .dg-center"),"tap")},doStartInspect:function(){this.doCleanInspect(),r.doc.bind(document,"taps",function(e){r.doc.unbind(document),o("closeInspect:",!0);var t=e.changedTouches&&e.changedTouches[0].target||e.target;r.inArray(t.className,["dg-inner","dg-out"])||r.map.eleToTree(t),e.preventDefault()})},doCloseInspect:function(){r.doc.unbind(document),this.doCleanInspect()}};r.extend(s,{deepFinder:function(e,t){for(var o="script"==e?"src":"href",n=a(e),r=0;r<n.length;r++)if(n[r][o]==t)return n[r];return null}});var d;r.extend({socketBuffer:[],socketTimeout:0,socketSendStop:1,_sendMessage:function(){if(0<r.socketBuffer.length){var e=r.socketBuffer.shift(),e=encodeURIComponent(e);setTimeout(function(){d.send(e);var t=Math.ceil(e.length/50);t>5e3?t=5e3:50>t&&(t=50),r.socketTimeout=t,0==r.socketBuffer.length?(r.socketSendStop=1,t>500&&(r.socketTimeout=t)):r._sendMessage()},r.socketTimeout)}},_getCurrentAddr:function(){for(var e,t=[],o=document.scripts,n=0,a=o.length;a>n;n++)if((e=o[n].src.match(/\?(.*)/))&&2==e.length){t=e[1].split(":");break}return t},decodeMessage:function(e){for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.charCodeAt(o).toString(16).substr(1,1)+e.charCodeAt(o+1).toString(16).substr(1,1),16));e=t.splice(0,4);for(var n=0,a="",o=0;o<t.length;o++)a+=String.fromCharCode(e[n++%4]^t[o]);return a},distributeMessage:function(e){e=decodeURIComponent(e);var t=e.indexOf(":");if(!(1>t)){var o=e.substring(0,t);e=e.substring(t+1),t="do"+o[0].toUpperCase()+o.substring(1);try{s[t](e)}catch(n){console.error(n.message)}}},initSocketMethod:function(e){e.onopen=function(){e.send(encodeURIComponent("initClient:"+r.version+"_debuggap_"+navigator.userAgent+"_debuggap_"+location.href)),n("#dgConnect")&&(n("#dgConnect").value="Connect")},e.onmessage=function(e){r.distributeMessage(e.data)},e.onclose=function(){r.scriptSocketFlag&&(n("#dgConnect")&&(n("#dgConnect").value="Connect"),console.error("Please check your network,client could not talk with server!"))}},scriptSocketFlag:0,initSocket:function(t){this.scriptSocketFlag=0;var o="ws://"+t.host+":"+t.port;t.name&&(o+="/"+t.name);var n=0;try{1==localStorage.scriptSocket?n=1:d=new WebSocket(o,t.protocal)}catch(a){console.log(a)}if((n||!d)&&(d=new e(t),this.scriptSocketFlag=1,1==localStorage.scriptSocket),this.initSocketMethod(d),1!=localStorage.scriptSocket){var r=this;setTimeout(function(){r.scriptSocketFlag=1,d&&1!=d.readyState&&(localStorage.scriptSocket=1,d=new e(t),r.initSocketMethod(d))},3e3)}}}),function(){/loaded|complete/.test(document.readyState)?setTimeout(r.ready,10):setTimeout(arguments.callee,10)}(),r.inherit({}),r.extend(s,{_doCacheJs:function(e,t){var o=s.filterCon(t);o.length?s.setPrototype(o):(n('script[_src="'+e+'"]')&&n('script[_src="'+e+'"]').remove(),n("#debuggapRoot").appendChild(r.createEle("script",{_src:e},t)))},filterCon:function(e){var t=0,o=[];do{var n=e.indexOf("enyo.kind");if(-1!=n){e=e.replace("enyo.kind","");for(var a=[],r=t;r<e.length;r++){var i=e.charCodeAt(r);if(123==i)a.push(r);else if(125==i){if(1>a.length){alert("remote debug error");break}if(1==a.length){a.push(r),t=r+1;break}a.pop()}}2==a.length?o.push(e.substring(a[0],a[1]+1)):alert("remote debug error")}}while(-1!=n);return o},setPrototype:function(e){for(var t=0;t<e.length;t++){var o=new Function("return "+e[t])(),n=o.name?o.name:o.kind?o.kind:null;if(n){var a,n=enyo.getPath(n);for(a in o)r.isFunction(o[a])&&(n.prototype[a]=o[a])}}}})}();